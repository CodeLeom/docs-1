---
id: add-custom-code
title: Adding Custom Code to Your Amplication Service
sidebar_label: Adding Custom Code
slug: /add-custom-code-to-your-service
---

# Adding Custom Code to Your Amplication Service

While Amplication generates a robust, production-ready backend for your application, you'll often need to add custom business logic or additional functionality. This guide explains how Amplication manages custom code alongside generated code, and provides best practices for adding your own code to an Amplication-generated service.

## Prerequisites

Before you begin, make sure you know to:

1. [Create your first service](/first-service/)
2. [Set up entities](/set-up-entities/) for your service
3. [Configure roles and permissions](/configure-roles-and-permissions/)
4. [Add plugins to your service](/add-plugins-service/)
5. [Commit changes and build a new version](/commit-and-build-new-versions/)
6. Read the [Understanding Custom Code in Amplication](/how-to/custom-code/) document

## Understanding Custom Code in Amplication

Amplication is designed to allow seamless integration of custom code with generated code through our [Smart Git Sync](/smart-git-sync) feature:

1. All code in your Amplication project can be customized.
2. Amplication uses a specific folder structure to manage custom and generated code.
3. The `base` folder contains generated files that Amplication updates with each build.
4. Files outside the `base` folder are intended for your custom code and are preserved across builds.
5. Amplication uses [smart merging](/smart-git-sync) to update your project while preserving your custom code.

## How Amplication Handles Custom Code

Amplication preserves your custom code during updates:

1. Base files in the `base` folder are regenerated with each build.
2. Non-base files (like `user.service.ts`) are preserved during updates.
3. If necessary, changes to non-base files are required (e.g., removing references to a deleted plugin), Amplication will make these changes automatically while preserving your custom code.

## Adding Custom Code: A Simple Example

Let's walk through a simple example of adding custom code to your service.

### Step 1: Create A New Feature Branch

Ensure that your local repository is up-to-date with the latest Amplication-generated code:

```bash
git checkout main && git merge amplication && git push origin main
```

Next, create a new branch from the main branch to make your custom code changes:

```bash
git checkout -b feature/user-full-name
```

### Step 2: Locate the Correct Files

Navigate to your service's `src` folder and find the `user` folder:

```
src
└── user
    ├── base
    │   ├── user.controller.base.ts
    │   ├── user.service.base.ts
    │   └── ...
    ├── user.controller.ts
    ├── user.module.ts
    ├── user.resolver.ts
    └── user.service.ts
```

We'll be modifying `user.service.ts` to add our custom functionality.

### Step 3: Add Custom Logic to the Service

Open `src/user/user.service.ts`. This file extends the base service and is where we'll add our custom method.

```typescript
import { Injectable } from "@nestjs/common";
import { UserServiceBase } from "./base/user.service.base";

@Injectable()
export class UserService extends UserServiceBase {
  async getUserFullName(userId: string): Promise<string> {
    const user = await this.findOne({ where: { id: userId } });
    return `${user.firstName} ${user.lastName}`;
  }
}
```

This example adds a simple method to get a user's full name. Note how it uses the `findOne` method from the base service.

### Step 4: Push Your Changes

After adding your custom code, commit the changes to your git repository:

```bash
git add .
git commit -m "Added full name functionality"
git push origin feature/user-full-name
```

After going through any review process, merge the feature branch into your working branch:

```bash
git checkout main && git merge feature/user-full-name && git push origin main
```

## Best Practices for Custom Code

When adding custom code to your Amplication service, keep these best practices in mind:

1. Add custom code to non-base files (e.g., `user.service.ts` instead of `user.service.base.ts`).
2. Use types and interfaces generated by Amplication to ensure type safety.
3. Leverage existing services and utilities provided by Amplication.
4. Document your custom code thoroughly.
5. Create a new branch for significant custom code changes.
6. Regularly pull and merge the latest Amplication-generated code from the `amplication` branch into your working branch.

## Next Steps

Now that you know how to add custom code to your Amplication service, you can:

- Implement complex business logic specific to your application
- Extend generated services with additional methods
- Create custom utilities and helpers
- Integrate with external services or APIs
- Implement advanced validation and data processing
